<!DOCTYPE html><script type="module">
import PropPanel	from "../../sage.ui/PropPanelv2.js";


</script>
<html><head><style>html,body{ margin:0px; padding:0px; width:100%; height:100%; }</style>
</head><body style="background-color:#505050;">


<svg><path style="fill:white;" d="M 5,7 h9 l -5,5 z"></path></svg>


<svg style="border:1px solid silver; width:100px; height:100px;" viewBox="-50 -50 100 100" >
    <circle cx="0" cy="0" r="8" style="fill:white;"></circle>
    <g x="10" transform="translate(-50,0)">
        <rect width="50px" height="20" x="0" style="fill:white;"></rect>
        <text x="10" y="15" fill="red">10101</text>
    </g>
    
    <!--<path style="fill:white;" d="M 5,7 h9 l -5,5 z"></path>
    <circle cx="0%" cy="0%" r="8" style="fill:white;"></circle>
    <path style="stroke: white; stroke-dasharray:2px 4px;  stroke-width:10px;" d="M 0,10  L 100,50"></path>-->
</svg>

<div id="Dragger" style="border:1px solid red; width:40px; height:40px; position:absolute; left:100px; top:100px; ">
    <svg style="fill:white; overflow:visible; visibility:show;">
        <circle cx="0" cy="4" r="3" fill="white" />
        <path style="stroke: white; stroke-dasharray: 2px 2px;" d="M 0,4 L15.5,4"></path>
        <path style="stroke: white; stroke-width:3px;" d="M 15.5,0 L15.5,8"></path>
    </svg>
</div>

<style>
    /*
    slide-input{ display:flex; flex-direction:row; user-select: none; height:20px; }
    slide-input svg{ flex:1 1 auto; }
    slide-input .rng_connect{ stroke:white; stroke-width:6px; stroke-linecap:round; }
    slide-input .rng_track{ stroke:gray; stroke-width:6px; stroke-linecap:round; }
    slide-input .rng_thumb { user-select: none; }
    slide-input .rng_thumb rect{ fill:white; rx:3px; }
    slide-input .rng_thumb text{ fill:black; font-size:14px; font-family: monospace; font-weight:bold; text-align:center; }
    */



    tester-elm{ display:flex; flex-direction:row; min-width:0px; }
    tester-elm svg{ border:2px solid orange; flex:1 1 50px; }

*/

</style>

<!--
<div style="border:1px solid red; width:300px; height:150px; position:absolute; left:200px; top:200px; display:flex;">
    <div style="border:1px solid yellow; flex:0 0 35%;">test</div>
    <div style="display:flex; min-width:0px;">
        <svg style="border:2px solid green;"></svg>
    </div>
</div>

<div style="border:1px solid red; width:300px; height:150px; position:absolute; left:200px; top:400px; display:flex;">
    <div style="border:1px solid yellow; flex:0 0 35%;">test</div>
    <tester-elm></tester-elm>
</div>

<div style="border:1px solid red; width:300px; height:150px; position:absolute; left:200px; top:600px; display:flex;">
    <div style="border:1px solid yellow; flex:0 0 35%;">test</div>
    <slide-input id="islide" min="0" max="1" value="0.5" style="border:3px solid green;"></slide-input>
</div>

<prop-row label="Rester" style="position:absolute; left:600px; top:200px; width:300px;">
    <svg style="border:2px solid green; flex:1 1 auto;"></svg>
</prop-row>
-->

    <prop-panel-btncont open="true" panelWidth="300px">

        <prop-panel label="" foot="Options">
            <select label="Eyes">
                <option value="">Option 0</option>
                <option value="">Option 1</option>
                <option value="">Option 2</option>
            </select>

            <check-button class="onoff"></check-button>
            <check-button class="yesno" on="false"></check-button>
            <check-button class="tf"></check-button>
            <check-button class="check" on="false"></check-button>

            <prop-row label="Drag">
                <range-input id="irange"></range-input>
            </prop-row>
            
            <prop-row label="Drag">
                <slide-input id="islide" min="0" max="1" value="0.5"></slide-input>
            </prop-row>
            
            <button>Test Button</button>
            <prop-row label="Testing"><button>yy</button></prop-row>
            
            <prop-row label="Testing"><input type="text"></prop-row>

            <prop-row label="Drag">
                <drag-number-input></drag-number-input>
            </prop-row>
            
            <prop-row label="Testing">
                <div style="display:flex; flex-direction:row; min-width:0px;">
                    <drag-number-input style="flex:1 1 auto; margin-right:3px; "></drag-number-input>
                    <drag-number-input style="flex:1 1 auto; margin-right:3px; "></drag-number-input>
                    <drag-number-input style="flex:1 1 auto;"></drag-number-input>
                </div>
            </prop-row>

            <prop-group label="Group 0">
                <button>Btn01</button>
                <prop-row label="Testing"><button>Btn02</button></prop-row>
                <prop-row label="Eyes">
                    <select label="Eyes">
                        <option value="">Option 0</option>
                        <option value="">Option 1</option>
                        <option value="">Option 2</option>
                    </select>
                </prop-row>
                <prop-row label="Drag">
                    <slide-input id="islide" min="0" max="1" value="0.5"></slide-input>
                </prop-row>
            </prop-group>
        </prop-panel>

    </prop-panel-btncont>



    <!--
    <div style="width:500px; padding:10px;">

    <prop-panel label="Property Panel" foot="Sketchpunk Labs">
        <select>
            <option value="">Option 0</option>
            <option value="">Option 1</option>
            <option value="">Option 2</option>
        </select>
        <prop-row label="Range"><input type="range" value="1" min="1" max="10"></prop-row>
        <button>xx</button>
        <prop-row label="Testing"><button>Test Button</button></prop-row>
        <prop-group label="Group 0" open="true">
            <button>Btn01</button>
            <prop-row label="Testing"><button>Btn02</button></prop-row>
        </prop-group>
    </prop-panel>

    </div>
    -->

<style>
	 .container{ position:absolute; bottom:10px; right:10px; }
    .Proxy{ border:0px solid red; width:50px; height:50px; position:relative; }
    .Proxy > button{
        background-color: rgb(83, 89, 199);
        box-shadow: 0px 0px 0px 0px rgba(92, 103, 255, 0.0);
        border:none;
        padding:4px; margin:0px;
        border-radius:50%;

        width: 50px;
        height: 50px;
        position:absolute;

        display:flex; flex-direction:column; align-items: stretch;
        box-sizing: border-box;

        transition: all 0.3s ease-in-out;

    }
    .Proxy > button > div{
        background-color: rgb(83, 89, 199);
        flex:1 1 auto;
        border-radius:50%;
        transition: all 0.3s ease-in-out;
    }

    .Proxy > button:focus{ outline:none; }
    .Proxy > button:hover{ 
        background-color: #00000000;
        box-shadow: 0px 0px 0px 4px #5c67ff;
    }

    .Proxy > button:hover div{
        background-color:#5c67ff;
    }

    .Proxy > section{
        border:1px solid green;
        position:absolute; width:100px;
        bottom:70%;
        right:70%;
        background-color:white;

        opacity: 1; transform: scale(1);
        transform-origin: bottom right;
        transition: all 0.3s ease 0.1s;
        border-radius:8px;
    }

    .Proxy > section.active{
        opacity: 0;
        transform: scale(0);
    }
</style>

<style>
    
</style>

<script>

window.addEventListener( "load", ()=>{
    //document.getElementById( "irange" ).addEventListener( "change", (e)=>{
    //    console.log( e.detail );
    //});

    new Dragger( "Dragger" );
});

class Dragger{
    constructor( id ){
        this.div = document.getElementById( id );
        this.svg = this.div.querySelector( "svg" );
        this.line = this.svg.querySelector( "path:nth-of-type(1)" );
        this.arrow = this.svg.querySelector( "path:nth-of-type(2)" )


        this.move = this.onMove.bind( this );
        this.up = this.onUp.bind( this );
        this.div.addEventListener( "mousedown", this.onDown.bind( this ), false );

        this.startX = 0;
    }

    onDown( e ){
        //if( e.target !== this.div ) return;
        this.startX = e.clientX;
        this.startX = this.svg.getBoundingClientRect().left;

        console.log( e.target );
        console.log( "DOWN", this.startX );


        document.addEventListener( "mousemove", this.move );
        document.addEventListener( "mouseup", this.up );

        
    }

    onMove( e ){
        //console.log( e );
        let x = e.clientX; 
        let xx = x - this.startX;
        let val = Math.floor( x / 10 );

        this.line.setAttribute( "d", "M 0,4 L" + xx +",4" );
        this.arrow.setAttribute( "d", `M ${xx},0 L${xx},8` );

        //<path style="fill:white;" d="M 10.5,0 L14.5,4 L10.5,8 M 15.5,-1 L15.5,9"></path>

        console.log( xx, val );
    }

    onUp( e ){
        console.log( "UP" );
        document.removeEventListener( "mousemove", this.move );
        document.removeEventListener( "mouseup", this.up );
    }
}


class TesterElm extends HTMLElement{
    // #region MAIN
    constructor(){
        super();

		//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        this.appendChild( document.importNode( TesterElm.Template.content, true ) );

        //~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        // Events
        this.observer = new ResizeObserver( this.on_resize.bind(this) );
        this.observer.observe( this );
    }
    // #endregion ////////////////////////////////////////

    // #region GETTER / SETTERS
    // #endregion ////////////////////////////////////////

    // #region WEB COM 
	connectedCallback(){}
    // #endregion ////////////////////////////////////////

    // #region EVENTS 
    on_resize( ary ){
        let cr       = ary[0].contentRect;
        console.log( "RESIZE", cr );
	}
    // #endregion ////////////////////////////////////////
}

TesterElm.Template = document.createElement( "template" );
TesterElm.Template.innerHTML = `<svg></svg>`;

window.customElements.define( "tester-elm", TesterElm );



</script>

<!--
<div class="container">
    <div class="Proxy">
        <section>
                xx<br>xxx<br>xxx<br>xx
        </section>
        <button><div>x</div></button>
    </div>
</div>

	
	<script>
        document.querySelector('div.Proxy').addEventListener('click', function () {
            document.querySelector( 'div.Proxy > section' ).classList.toggle('active');
        });
	</script>
--> 


<!--
https://davidwalsh.name/css-variables-javascript

Slide Panel
Button Panel
Panel which loads in Components


<prop-panel-btncont>

	<prop label="" id=""></prop>
	<select id="" no_node> // Does not wrap into a PropNode
</prop-pop-btncontainer>

<prop-panel-slidecont>

select
button
text
vector
slider
range
checkboxes

class Panel{
	elements/items/data/values/proxy ?

	on_input();
	on_change();
}

Panel.elm.slider1 = 5;
let v = Panel.elm.slider1;
-->

</body></html>